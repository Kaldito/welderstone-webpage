<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <%- include('layouts/metaData'); -%>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welderstone - About</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- CSS Stylesheet-->
    <link rel="stylesheet" href="css/styles.css">
    <!-- FontAwesome-->
    <script src="https://kit.fontawesome.com/c1d78340ca.js" crossorigin="anonymous"></script>
</head>

<body>
  <%- include('layouts/navbar'); -%>

    <section id="presentation">
    
      <div class="container">
        <div class="row mt-5">
          <div class="col-md-8 offset-md-2">
            <div class="card">
              <img width="200px" height="200px" src="<%=productodatos[0].image%>" alt="Product 1">




              <div class="card-body">

                <div class="text-center">

                  <h4 class="card-title">
                    <%=productodatos[0].nombre%>
                  </h4>
                  <p class="card-text">Precio: $<%=productodatos[0].precio.toLocaleString()%>
                  </p>
                  <p class="card-text">Cantidad: <%=productodatos[0].cantidad%>
                  </p>
                  <p class="card-text">Unidad: <%=productodatos[0].unidad%>
                  </p>
                  <p class="card-text">Codigo: <%=productodatos[0].codigo%>
                  </p>


                  <p class="card-text">SubTotal: $<%=SubTotalR.toLocaleString()%>
                  </p>

                  <p class="card-text">Iva: $<%
                    var valorMultiplicado = (SubTotalR * 0.16);
                    var resultadoFinal = valorMultiplicado.toFixed(2);
                    resultadoFinal = parseFloat(resultadoFinal).toLocaleString();
                    %>
                    
                    <%= resultadoFinal %></p>
                  <p class="card-text">Total: $<%=TotalFinal.toLocaleString()%>
                  </p>

                </div>
              </div>
            
              <div class="mt-4 text-center">
                <a href="/pdfDescargar?IdTrans=<%=IdTransaccion%>&amp;Codigo=<%=productodatos[0].Codigo%>"
                  class="btn btn-primary mr-3">Descargar pdf</a>

                <!--<a href="/whatsapp?IdTrans=<%=IdTransaccion%>&amp;Codigo=<%=productodatos[0].Codigo%>&amp" class="btn btn-success">Recibir por whatsapp</a>-->

              </div>


              <div class="row mt-4">
                <div class="col-md-12">
                  <h5>Materiales:</h5>
                  <div class="table-responsive">
                    <table class="table table-striped">
                      <thead>
                        <tr>
                          <th>Codigo</th>
                          <th>Descripcion</th>
                          <th>Familia</th>
                          <th>Cantidad</th>
                          <th>Precio Unitario</th>
                          <th>Importe</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% for (var b=0; b < ProductoParaCotizar.MaterialesProductos.length; b++) { %>
                          <tr>
                            <td>
                              <%=ProductoParaCotizar.MaterialesProductos[b].Codigo%>

                            </td>
                            <td>
                              <%=ProductoParaCotizar.MaterialesProductos[b].Descripcion%>

                            </td>
                            <td>
                              <%=ProductoParaCotizar.MaterialesProductos[b].Familia%>
                            </td>
                            <td>
                              <%=ProductoParaCotizar.MaterialesProductos[b].cantidad%>
                            </td>
                            <td>
                              $<%= MaterialesMostrar[b].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") %>

                            </td>
                            <td>
                              <% let num1=ProductoParaCotizar.MaterialesProductos[b].cantidad; %>
                                <% let num2=MaterialesMostrar[b]; %>
                                $<%= (num1 * num2).toLocaleString() %>
                            </td>
                          </tr>
                          <% } %>
                      </tbody>
                    </table>
                    <table class="table table-striped">
                      <thead>
                        <tr>

                          <th></th>
                          <th></th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>

                          <td>
                            Material:
                            <br>
                            Mano de obra material:
                            <br>
                            Indirectos y Honorarios:

                          </td>
                          <td>Suma:
                            <br>
                            <%=ProductoParaCotizar.ManoObMaterial%>
                              <br>
                              <%=ProductoParaCotizar.PorcentajeMaterial%>
                                <br>
                                Total:
                          </td>

                          <td>
                            $<%=MaterialSuma.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                              <br>
                              $<%=ManoObMaterial1R.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                                <br>
                                $<%=ManoObMaterial2R.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                                  <br>
                                  $<%=Total1R.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>




              <div class="row mt-4">
                <div class="col-md-12">
                  <h5>Pintura:</h5>
                  <table class="table table-striped">
                    <thead>
                      <tr>
                        <th>Código</th>
                        <th>Descripción</th>

                        <th>Familia</th>
                        <th>Cantidad</th>
                        <th>Precio Unitario</th>
                        <th>Importe</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% for (var b=0; b < ProductoParaCotizar.PinturaProductos.length; b++) { %>
                        <tr>
                          <td>
                            <%=ProductoParaCotizar.PinturaProductos[b].Codigo%>

                          </td>
                          <td>
                            <%=ProductoParaCotizar.PinturaProductos[b].Descripcion%>

                          </td>
                          <td>
                            <%=ProductoParaCotizar.PinturaProductos[b].Familia%>
                          </td>
                          <td>
                            <%=ProductoParaCotizar.PinturaProductos[b].cantidad%>
                          </td>
                          <td>
                            $<%=PinturaMostrar[b].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                          </td>
                          <td>
                            <% let num1=ProductoParaCotizar.PinturaProductos[b].cantidad; %>
                              <% let num2=PinturaMostrar[b]; %>
                              $<%= (num1 * num2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") %>
                          </td>
                        </tr>
                        <% } %>
                    </tbody>
                  </table>
                  <table class="table table-striped">
                    <thead>
                      <tr>

                        <th></th>
                        <th></th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>

                        <td>
                          Pintura:
                          <br>
                          Mano de obra material:
                          <br>
                          Indirectos y Honorarios:

                        </td>
                        <td>Suma:
                          <br>
                          <%=ProductoParaCotizar.ManoObPintura%>
                            <br>
                            <%=ProductoParaCotizar.PorcentajePintura%>
                              <br>
                              Total:
                        </td>

                        <td>
                          $<%=PinturaSumaRedondeada.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                            <br>
                            $<%=ManoObPintura1R.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                              <br>
                              $<%=ManoObPintura2R.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                                <br>
                                $<%=Total2R.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>

                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="row mt-4">
                <div class="col-md-12">
                  <h5>Instalación:</h5>
                  <table class="table table-striped">
                    <thead>
                      <tr>
                        <th>Código</th>

                        <th>Descripción</th>
                        <th>Familia</th>
                        <th>Cantidad</th>
                        <th>Precio Unitario</th>
                        <th>Importe</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% for (var b=0; b < ProductoParaCotizar.InstalacionProductos.length; b++) { %>
                        <tr>
                          <td>
                            <%=ProductoParaCotizar.InstalacionProductos[b].Codigo%>

                          </td>
                          <td>
                            <%=ProductoParaCotizar.InstalacionProductos[b].Descripcion%>

                          </td>
                          <td>
                            <%=ProductoParaCotizar.InstalacionProductos[b].Familia%>
                          </td>
                          <td>
                            <%=ProductoParaCotizar.InstalacionProductos[b].cantidad%>
                          </td>
                          <td>
                            $<%=InstalacionesMostrar[b].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                          </td>
                          <td>
                            <% let num1=ProductoParaCotizar.InstalacionProductos[b].cantidad; %>
                              <% let num2=InstalacionesMostrar[b]; %>
                              $<%= (num1 * num2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                          </td>
                        </tr>
                        <% } %>
                    </tbody>
                  </table>
                  <table class="table table-striped">
                    <thead>
                      <tr>

                        <th></th>
                        <th></th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>

                        <td>
                          Instalación:
                          <br>
                          Mano de obra material:
                          <br>
                          Indirectos y Honorarios:

                        </td>
                        <td>Suma:
                          <br>
                          <%=ProductoParaCotizar.ManoObInstalacion%>
                            <br>
                            <%=ProductoParaCotizar.PorcentajeInstalacion%>
                              <br>
                              Total:
                              <br>
                              <br>

                              Total suma:
                              <% var TotalSuma=Number(Total3R) + Number(Total2R) + Number(Total1R); %>
                                <br>
                                Iva:
                                <br>
                                Total Final:
                                <% var porcentaje=0.16; var TotalFinal=TotalSuma + (TotalSuma * porcentaje); %>

                        </td>

                        <td>
                          $<%= InstalacionSuma ? InstalacionSuma.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") : '' %>
                          <br>
                          $<%=ManoObInstalacion1R.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                              <br>
                              $<%=ManoObInstalacion2R.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                                <br>
                                $<%=Total3R.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%>
                                  <br>
                                  <br>
   
                                  $<%= TotalSuma.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",") %> %>
                                    <br>
                                    
                                    <%
                                    var valorMultiplicado = (TotalSuma * 0.16).toFixed(2);
                                    var resultadoFinal = parseFloat(valorMultiplicado).toLocaleString();
                                    %>
                                    $<%= valorMultiplicado.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")%> %>

                                   <br>

                                    $<%= parseFloat(TotalFinal).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",") %>

                        </td>
                      </tr>
                    </tbody>
                  </table>



                </div>

              </div>
            </div>
          </div>
        </div>
   
    </section>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"></script>
    <!--Multi Select-->
    <script src="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag/dist/js/multi-select-tag.js"></script>

    <script src="https://kit.fontawesome.com/360b0549be.js" crossorigin="anonymous"></script>

    <script src="js/productos.js"></script>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- FontAwesome-->
    <script src="https://kit.fontawesome.com/360b0549be.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/mobiscroll.javascript.min.css">

    <script src="js/multiple.js"></script>
</body>

</html>
<style>
  .custom-button {
    background-color: blue;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    top: -100px;
    position: relative;
    top: 10px;
    /* Puedes ajustar este valor según sea necesario */
    left: -80px;
  }

  .pdf {
    position: relative;
    top: 30px;
    /* Puedes ajustar este valor según sea necesario */
    left: -55px;
  }
</style>
<script>
  function numberWithCommas(number) {
    var parts = number.toString().split(".");
    parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    return parts.join(".");
  }
  </script>